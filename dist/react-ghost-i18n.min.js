"use strict";var I18n=function(){function t(t){return t.mixins?r.call(t.mixins,function(t){return t.noI18n}):void 0}var n=React.createClass({displayName:"I18n",noI18n:!0,prop:function(t){return this.props.i18n&&this.props.i18n[t]||this.props[t]||n[t]},warn:function e(t){t="I18n: "+t;var e=this.prop("warn");e&&e(t)},translateString:function(t){var n=this.prop("locale"),r=(this.prop("prefix")||"")+t,e="function"==typeof n?n(r):n&&n[r];return e?e:(t&&t.match(/[a-z]/i)&&this.warn("missing translation for: "+r),t)},translateProps:function(t,r){var e={key:r},i=function(n){t.props[n]&&(e[n]=this.translateString(t.props[n]))}.bind(this);"string"==typeof t.type&&(i("title"),i("alt"),i("placeholder"),"input"!=t.type||"button"!=t.props.type&&"submit"!=t.props.type||i("value"));var a=t.type==n?t:e.i18n={},s=function(n){a[n]=t.props[n]||this.prop(n)}.bind(this);return s("warn"),s("locale"),s("prefix"),e},translateChildren:function(t){function r(t){t&&p.push(t)}if(!t.props||!t.props.children)return null;if(t.type==n&&t!=this||void 0!==t.props["i18n-disabled"])return t.props.children;var e=[],i=[];React.Children.forEach(t.props.children,function(t,n){t.props?(e.push("{"+i.length+"}"),i.push(t)):e.push(t)});for(var a,s=e.join(""),o=e.length==i.length?s:this.translateString(s),p=[],l=0,u=new RegExp(/\{(\d+)\}/g),c=0;a=u.exec(o);){++c,r(o.substring(l,a.index));var h=parseInt(a[1]),f=i[h];f=React.cloneElement(f,this.translateProps(f,h),this.translateChildren(f)),r(f),l=u.lastIndex}return r(o.substring(l)),c!=i.length&&this.warn("incorrect number of arguments in translation for '"+s+"' -> '"+o+"'"),1==p.length?p[0]:p},render:function(){return React.createElement("span",null,this.translateChildren(this))}});n.warn=function(t){console.warn(t)};var r=Array.prototype.filter||function(t){var n=[];for(var r in this){var e=this[r];t(e)&&n.push(e)}return n};return n.optIn=function(){n.originalCreateClass||(n.originalCreateClass=React.createClass,React.createClass=function(r){return r.noI18n||t(r)?n.originalCreateClass(r):(r.renderWithoutI18n=r.render,r.render=function(){return React.createElement(n,this.props,this.renderWithoutI18n())},n.originalCreateClass(r))})},n.optOut=function(){React.createClass=n.originalCreateClass||React.createClass,delete n.originalCreateClass},n.optIn(),n}();